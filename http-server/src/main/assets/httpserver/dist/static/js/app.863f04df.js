(function(e){function t(t){for(var s,l,o=t[0],r=t[1],c=t[2],p=0,u=[];p<o.length;p++)l=o[p],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&u.push(a[l][0]),a[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,o=1;o<i.length;o++){var r=i[o];0!==a[r]&&(s=!1)}s&&(n.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},a={app:0},n=[];function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=r;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"03a4":function(e,t,i){"use strict";i("33ce")},"0b87":function(e,t,i){},2456:function(e,t,i){"use strict";i("760f")},2669:function(e,t,i){"use strict";i("71fc")},"33ce":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("3b18");var s=i("f64c"),a=(i("55ec"),i("a79d")),n=(i("c119"),i("d865")),l=(i("7f6b"),i("8592")),o=(i("5704"),i("b558")),r=(i("cd17"),i("ed3b")),c=(i("5136"),i("681b")),d=(i("dd48"),i("2fc4")),p=(i("ee00"),i("bb76")),u=(i("0032"),i("e32c")),h=(i("de6a"),i("9a63")),f=(i("d88f"),i("fe2b")),m=(i("6ba6"),i("5efb")),v=(i("8fb1"),i("0c63")),g=(i("fbd8"),i("55f1")),b=(i("1a62"),i("98c5")),k=(i("cadf"),i("551c"),i("f751"),i("097d"),i("2b0e")),F=function(){var e=this,t=e._self._c;return t("a-layout",{staticClass:"g-container"},[t("a-layout-sider",{staticClass:"sider",class:{break:e.breakpoint},attrs:{breakpoint:"xs",collapsedWidth:"0",theme:e.theme,trigger:null,collapsed:e.cancollapse},on:{breakpoint:e.onBreakpoint}},[t("nav-menu"),e.breakpoint?t("div",{staticClass:"trigger",on:{click:function(t){e.isfold=!e.isfold}}},[t("a-icon",{staticClass:"icon",attrs:{type:"menu-fold"}})],1):e._e()],1),t("router-view",{attrs:{breakpoint:e.breakpoint}})],1)},y=[],_=function(){var e=this,t=e._self._c;return t("a-menu",{attrs:{defaultSelectedKeys:["1"],mode:"vertical",theme:e.theme,selectedKeys:[e.getcurrent]},on:{click:e.handleClick}},[t("a-menu-item",{key:"1"},[t("router-link",{attrs:{to:"/"}},[e._v("文件上传")])],1),t("a-menu-item",{key:"2"},[t("router-link",{attrs:{to:"/manage"}},[e._v("文件管理")])],1),t("a-menu-item",{key:"3"},[t("router-link",{attrs:{to:"/settings"}},[e._v("设置")])],1),t("a-menu-item",{key:"4"},[t("router-link",{attrs:{to:"/help"}},[e._v("使用帮助")])],1),t("a-menu-item",{key:"5"},[t("router-link",{attrs:{to:"/about"}},[e._v("关于")])],1)],1)},x=[],C={name:"NavMenu",data:function(){return{current:"1",theme:"dark"}},computed:{getcurrent:function(){switch(this.$route.path){case"/":return"1";case"/manage":return document.title="文件管理","2";case"/settings":return document.title="设置","3";case"/help":return document.title="使用帮助","4";case"/about":return document.title="关于","5"}return"-1"}},methods:{handleClick:function(e){this.current=e.key}}},D=C,I=i("2877"),L=Object(I["a"])(D,_,x,!1,null,null,null),w=L.exports,P={name:"App",components:{NavMenu:w},data:function(){return{theme:"dark",breakpoint:!1,isfold:!0}},computed:{cancollapse:function(){return!!this.breakpoint&&!!this.isfold}},methods:{onBreakpoint:function(e){this.breakpoint=e}}},S=P,T=(i("7457"),Object(I["a"])(S,F,y,!1,null,null,null)),V=T.exports,O=i("bc3a"),N=i.n(O),j=i("f121"),M=N.a.create({baseURL:j["baseUrl"],withCredentials:!0,timeout:1e5});M.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/json;charset=UTF-8",e}),(function(e){return console.log(e),Promise.reject(e)})),M.interceptors.response.use((function(e){var t=e.data;return e.request.responseType,Promise.resolve(t)}),(function(e){return alert("错误"+e),Promise.reject(e)}));var $=M,z=i("8c4f"),B=function(){var e=this,t=e._self._c;return t("a-layout",[t("a-layout-header",{staticClass:"g-header"},[t("my-progress",{class:[e.breakpoint?"progressBreak":"progress"],attrs:{percent:e.needPercent,subPercent:e.usedPercent,strokeWidth:8}}),t("input",{ref:"inputFile",staticStyle:{display:"none",width:"0px",height:"0px"},attrs:{type:"file",multiple:"multiple"},on:{change:e.inputFile}}),t("div",{ref:"uploadArea",staticClass:"g-uploadArea"},[t("a-button",{ref:"uploadBtn",staticClass:"g-upload",attrs:{type:"dashed",size:e.size,block:""},on:{click:e.chooseFile}},[t("p",{staticClass:"g-upload-drag-icon"},[t("a-icon",{staticClass:"icon",attrs:{type:"inbox"}})],1),t("p",{staticClass:"g-upload-text"},[e._v("点击或拖拽文件到此处上传")]),t("p",{staticClass:"g-upload-hint"},[e._v("支持单个或多个文件，严禁上传被禁止的文件")])])],1)],1),t("a-layout-content",{staticClass:"g-content"},[t("a-list",e._l(e.fileList,(function(i,s){return t("upload-item",{key:i.file.lastModified+""+s,attrs:{itemData:i,index:s,disable:e.disable},on:{removeFile:e.removeFile}})})),1)],1),t("a-layout-footer",{staticClass:"g-footer"},[t("a-button",{attrs:{icon:"upload",size:e.size,block:""},on:{click:e.uploadFile}},[e._v("上传")])],1)],1)},U=[],R=(i("28a5"),i("7f7f"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"uploadItem"},[t("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},[t("a-col",{staticClass:"name",attrs:{xs:5}},[e._v(e._s(this.itemData.file.name))]),t("a-col",{staticClass:"type",attrs:{xs:4}},[e._v(e._s(this.itemData.info.type))]),t("a-col",{attrs:{xs:12,sm:14}},[t("my-progress",{attrs:{percent:this.itemData.info.progress,subPercent:"sub"===this.itemData.info.status?100:0,errPercent:"err"===this.itemData.info.status?100:0,strokeWidth:8}})],1),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[t("a-button",{attrs:{shape:"circle",icon:"close",size:"small",disabled:this.disable},on:{click:function(t){return e.removeFile(e.index)}}})],1)],1)],1)}),A=[],W=(i("c5f6"),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"progress-container"},[t("div",{staticClass:"progress-pg",style:{width:this.percent+"%",height:this.strokeWidth+"px"}}),this.subPercent?t("div",{staticClass:"progress-sub",style:{width:this.subPercent+"%",height:this.strokeWidth+"px"}}):e._e(),this.errPercent?t("div",{staticClass:"progress-err",style:{width:this.errPercent+"%",height:this.strokeWidth+"px"}}):e._e()]),t("div",[e._v("\n    "+e._s(e.subPercent)+" %\n  ")])])}),K=[],q={name:"MyProgress",data:function(){return{}},props:{percent:Number,subPercent:Number,errPercent:Number,strokeWidth:Number}},E=q,G=(i("aa45"),Object(I["a"])(E,W,K,!1,null,null,null)),H=G.exports,J={name:"UploadItem",components:{MyProgress:H},data:function(){return{}},props:{itemData:Object,disable:Boolean,index:Number},methods:{removeFile:function(){this.$emit("removeFile",this.index)}}},Q=J,Y=(i("2456"),Object(I["a"])(Q,R,A,!1,null,null,null)),X=Y.exports,Z={name:"UploadPanel",components:{UploadItem:X,MyProgress:H},props:{breakpoint:Boolean},data:function(){return{size:"default",fileList:[],uploadIndex:0,disable:!1,totalSpace:0,usedSpace:0,needSpace:0,usedPercent:0,needPercent:0}},computed:{},watch:{fileList:function(){this.computeSizePercent()},usedSpace:function(){this.computeSizePercent()}},mounted:function(){var e=this;this.$refs.uploadArea.ondragleave=function(e){e.preventDefault()},this.$refs.uploadArea.ondrop=function(t){t.preventDefault();var i=t.dataTransfer.files;if(!(i.length<1))for(var s=0;s<t.dataTransfer.files.length;s++)if(""!==t.dataTransfer.files[s].type){var a={file:null,info:{progress:0,status:"upload",type:""}},n=e.fileList.length;if(n<1)a.file=t.dataTransfer.files[s],a.info.type=e.getFileType(t.dataTransfer.files[s].name),e.fileList.push(a);else{for(var l=!0,o=0;o<n;o++)if(t.dataTransfer.files[s].name===e.fileList[o].name&&t.dataTransfer.files[s].lastModified===e.fileList[o].lastModified){l=!1;break}l&&(a.file=t.dataTransfer.files[s],a.info.type=e.getFileType(t.dataTransfer.files[s].name),e.fileList.push(a))}}},this.$refs.uploadArea.ondragenter=function(e){e.preventDefault()},this.$refs.uploadArea.ondragover=function(e){e.preventDefault()},this.getDiskInfo()},methods:{computeSizePercent:function(){for(var e=this.fileList.length,t=this.fileList,i=0,s=0;s<e;s++)"upload"===t[s].info.status&&(i+=t[s].file.size);this.needSpace=this.usedSpace+i,this.needSpace>this.totalSpace?(this.needPercent=100,this.$message.error("上传内容过大，请取消部分上传内容",10)):this.needPercent=this.needSpace/this.totalSpace*100,this.usedPercent=this.usedSpace/this.totalSpace*100},getDiskInfo:function(){var e=this;this.axios.post("/api/getDiskInfo").then((function(t){e.usedSpace=t.usedSpace,e.totalSpace=t.totalSpace}))},getFileType:function(e){return e.split(".").pop().toLowerCase()},inputFile:function(){var e=this.$refs.inputFile.files;if(!(e.length<1)){for(var t=0;t<e.length;t++)if(""!==e[t].type){var i={file:null,info:{progress:0,status:"upload",type:""}},s=this.fileList.length;if(s<1)i.file=e[t],i.info.type=this.getFileType(e[t].name),this.fileList.push(i);else{for(var a=!0,n=0;n<s;n++)if(e[t].name===this.fileList[n].name&&e[t].lastModified===this.fileList[n].lastModified){a=!1;break}a&&(i.file=e[t],i.info.type=this.getFileType(e[t].name),this.fileList.push(i))}}this.$refs.inputFile.value=""}},chooseFile:function(){this.$refs.inputFile.dispatchEvent(new MouseEvent("click"))},removeFile:function(e){e<=this.uploadIndex&&0!==this.uploadIndex&&this.uploadIndex--,this.fileList.splice(e,1)},uploadFile:function(){var e=this;if(this.fileList.length>0&&this.fileList.length>this.uploadIndex){this.disable=!0;var t={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var i=t.loaded/t.total*100|0;e.fileList[e.uploadIndex].info.progress=i}},i=new FormData;i.append("uploadFile",this.fileList[this.uploadIndex].file,this.fileList[this.uploadIndex].file.name),this.axios.post("/upload",i,t).then((function(t){e.fileList[e.uploadIndex].info.status="sub",e.uploadIndex++,e.uploadIndex<e.fileList.length?e.uploadFile():e.disable=!1,e.getDiskInfo()})).catch((function(t){console.error(t),e.fileList[e.uploadIndex].info.status="err",e.uploadIndex++,e.$message.error("上传失败，请检查网络连接、浏览器地址或是否已关闭文件服务！",5),e.uploadIndex<e.fileList.length?e.uploadFile():e.disable=!1}))}}}},ee=Z,te=(i("7f3b"),Object(I["a"])(ee,B,U,!1,null,null,null)),ie=te.exports,se=function(){var e=this,t=e._self._c;return t("a-layout",[t("a-layout-header",{staticClass:"g-header"},[t("my-progress",{staticClass:"progress",class:[e.breakpoint?"progressBreak":"progress"],attrs:{percent:e.computeDiskInfo,strokeWidth:8}}),t("a-row",{staticStyle:{"line-height":"1.5"}},[t("a-col",{attrs:{xs:12}},[t("a-button-group",[t("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.checkAll}}),t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.mkdirVisible=!e.mkdirVisible}}},[e._v(e._s(e.breakpoint?"":"新建文件夹")+"\n          ")]),t("a-modal",{attrs:{title:"新建文件夹",confirmLoading:e.mkdirConfirmLoading,okButtonProps:{props:{disabled:e.mkdirOkDisable}},maskClosable:!1},on:{ok:e.handleMkdirOk,cancel:function(t){e.mkdirName=""}},model:{value:e.mkdirVisible,callback:function(t){e.mkdirVisible=t},expression:"mkdirVisible"}},[t("a-input",{ref:"dirInput",attrs:{placeholder:"新文件夹名称"},on:{change:e.checkDirName,blur:e.checkDirName},model:{value:e.mkdirName,callback:function(t){e.mkdirName=t},expression:"mkdirName"}}),e.mkdirTipsVisible?t("p",{staticStyle:{color:"red"}},[e._v("\n              输入正确的文件夹名称\n            ")]):e._e()],1)],1)],1),t("a-col",{attrs:{xs:12}},[t("div",{staticStyle:{float:"right"}},[t("a-button-group",[t("a-button",{attrs:{type:"primary",icon:"cloud-upload"},on:{click:function(t){e.uploadVisible=!0}}}),t("a-modal",{staticClass:"uploadModal",attrs:{title:"上传文件",confirmLoading:e.uploadConfirmLoading},on:{ok:e.uploadFileOk,cancel:e.cancelUpload},model:{value:e.uploadVisible,callback:function(t){e.uploadVisible=t},expression:"uploadVisible"}},[t("div",[t("input",{ref:"inputFile",staticStyle:{display:"none",width:"0px",height:"0px"},attrs:{type:"file"},on:{change:e.inputFile}}),t("a-button",{attrs:{disabled:e.uploadBtnDisable},on:{click:e.chooseUploadFile}},[t("a-icon",{attrs:{type:"upload"}}),e._v("\n                  Upload\n                ")],1),t("span",[e._v(e._s(null===e.uploadFile?"暂未选择文件":e.uploadFile.name))])],1),t("p",[e._v("文件会上传在当前文件夹下")]),t("p",[e._v("一次只能上传一个文件")])]),t("a-button",{attrs:{type:"primary",icon:"cloud-download"},on:{click:e.downloadSelectFile}}),t("a-modal"),t("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:function(t){e.delFileVisible=!0}}}),t("a-modal",{attrs:{title:"确认",confirmLoading:e.delFileConfirmLoading},on:{ok:e.removeAllSelectFile},model:{value:e.delFileVisible,callback:function(t){e.delFileVisible=t},expression:"delFileVisible"}},[t("p",[e._v("确认是否删除选中的文件与文件夹")])])],1)],1)])],1),t("a-row",{staticClass:"filePanel",attrs:{type:"flex",justify:"space-around",align:"middle"}},[t("a-col",{attrs:{xs:15,sm:11}},[e._v("文件名")]),t("a-col",{attrs:{xs:6}},[e._v("文件大小")]),t("a-col",{attrs:{xs:0,sm:6}},[e._v("最后修改时间")]),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[e._v("更多")])],1)],1),t("a-layout-content",{staticClass:"g-content"},[t("a-spin",{attrs:{spinning:e.spinning}},[t("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),e.hasPercent?t("file-item",{attrs:{type:"percent"},nativeOn:{click:function(t){return e.backPercent.apply(null,arguments)}}}):e._e(),e._l(e.dirList,(function(i,s){return t("file-item",{key:i.name+"_"+s,attrs:{itemData:i,index:s,type:"folder",breakpoint:e.breakpoint,isChecked:e.isChecked("folder",s)},on:{chooseFileItem:e.chooseFileItem,delFile:e.showDelModal,removeFile:e.showRemoveModal,renameFile:e.showRenameModal,downloadFile:e.downloadFile,openFile:e.openFile},nativeOn:{click:function(t){return e.viewDir(i)}}})})),e._l(e.fileList,(function(i,s){return t("file-item",{key:i.name+"_"+s,attrs:{index:s,itemData:i,type:"file",breakpoint:e.breakpoint,isChecked:e.isChecked("file",s)},on:{chooseFileItem:e.chooseFileItem,delFile:e.showDelModal,removeFile:e.showRemoveModal,renameFile:e.showRenameModal,downloadFile:e.downloadFile,openFile:e.openFile}})}))],2),t("a-modal",{attrs:{title:"删除文件",confirmLoading:e.ddelFileConfirmLoading,maskClosable:!1},on:{ok:e.delFileOK,cancel:e.cancelDel},model:{value:e.ddelFileVisible,callback:function(t){e.ddelFileVisible=t},expression:"ddelFileVisible"}},[t("p",[e._v("是否删除文件")]),t("p",[e._v(e._s(e.getCheckFileName))])]),t("a-modal",{attrs:{title:"移动文件",confirmLoading:e.removeFileConfirmLoading,okButtonProps:{props:{disabled:e.hasRemoveSelect}}},on:{ok:e.removeFileOk,cancel:e.cancelRemove},model:{value:e.removeFileVisible,callback:function(t){e.removeFileVisible=t},expression:"removeFileVisible"}},[t("p",[e._v(e._s(e.getCheckFileName))]),t("a-tree",{attrs:{loadData:e.onLoadData,treeData:e.treeData},on:{select:e.selectToDir}})],1),t("a-modal",{attrs:{title:"文件重命名",confirmLoading:e.renameFileConfirmLoading,okButtonProps:{props:{disabled:e.renameOkDisable}},maskClosable:!1},on:{ok:e.renameFileOk,cancel:e.cancelRename},model:{value:e.renameFileVisible,callback:function(t){e.renameFileVisible=t},expression:"renameFileVisible"}},[t("p",[e._v(e._s(e.getCheckFileName))]),t("a-input",{attrs:{placeholder:"新文件名称"},on:{change:e.checkFileName,blur:e.checkFileName},model:{value:e.renameName,callback:function(t){e.renameName=t},expression:"renameName"}}),e.renameTipsVisible?t("p",[e._v("输入合格的文件名")]):e._e()],1)],1)],1)},ae=[],ne=i("2909"),le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fileItem"},[t("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},["percent"===e.type?t("span",{staticStyle:{float:"left"}},[t("a-icon",{attrs:{type:"up"}})],1):[t("a-col",{staticClass:"name",attrs:{xs:15,sm:11}},[t("a-checkbox",{attrs:{checked:e.isChecked},on:{change:e.chooseFileItem,click:function(e){e.stopPropagation()}}}),t("a-icon",{staticStyle:{"font-size":"24px",margin:"0px 5px"},attrs:{theme:"filled",type:"file"===e.type?"file":"folder"}}),e._v("\n        "+e._s(this.itemData.name)+"\n      ")],1),t("a-col",{staticClass:"size",attrs:{xs:6}},[e._v(e._s("file"===e.type?e.getFileSize:"-"))]),t("a-col",{attrs:{xs:0,sm:6}},[e._v(e._s("file"===e.type?e.getTime(e.itemData.time):"-"))]),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[t("a-popover",{attrs:{placement:"topRight"},model:{value:e.popover,callback:function(t){e.popover=t},expression:"popover"}},[t("template",{slot:"content"},[t("a-button-group",["file"===e.type?t("a-button",{attrs:{icon:"login",size:"small"},on:{click:e.openFile}},[e._v(e._s(e.breakpoint?"":"打开")+"\n              ")]):e._e(),t("a-button",{attrs:{icon:"rollback",size:"small"},on:{click:e.removeFile}},[e._v(e._s(e.breakpoint?"":"移动"))]),t("a-button",{attrs:{icon:"edit",size:"small"},on:{click:e.renameFile}},[e._v(e._s(e.breakpoint?"":"重命名"))]),"file"===e.type?t("a-button",{attrs:{icon:"cloud-download",size:"small"},on:{click:e.downloadFile}},[e._v(e._s(e.breakpoint?"":"下载")+"\n              ")]):e._e(),t("a-button",{attrs:{icon:"delete",size:"small"},on:{click:e.delFile}},[e._v(e._s(e.breakpoint?"":"删除"))])],1)],1),t("a-button",{attrs:{shape:"circle",icon:"ellipsis",size:"small"},on:{click:function(t){t.stopPropagation(),e.popover=!0}}})],2)],1)]],2)],1)},oe=[];function re(e){var t=new Date(e),i=t.getFullYear(),s=t.getMonth()+1,a=t.getDate(),n=t.getHours(),l=t.getMinutes();return s<10&&(s="0"+s),a<10&&(a="0"+a),n<10&&(n="0"+n),l<10&&(l="0"+l),i+"-"+s+"-"+a+" "+n+":"+l}var ce={name:"FileItem",data:function(){return{getTime:re,popover:!1}},props:{breakpoint:Boolean,itemData:Object,type:String,show:Boolean,index:Number,isChecked:Boolean},computed:{getFileSize:function(){var e=this.itemData.size,t="";return t=e<1048576?(e/1024).toFixed(2)+"KB":1048576===e?"1MB":e>1048576&&e<1073741824?(e/1048576).toFixed(2)+"MB":e>1048576&&1073741824===e?"1GB":e>1073741824&&e<1099511627776?(e/1073741824).toFixed(2)+"GB":"文件超过1TB",t}},methods:{chooseFileItem:function(e){this.$emit("chooseFileItem",this.type,this.index,e.target.checked)},delFile:function(){this.$emit("delFile",this.type,this.index)},renameFile:function(){this.$emit("renameFile",this.type,this.index)},removeFile:function(){this.$emit("removeFile",this.type,this.index)},downloadFile:function(){this.$emit("downloadFile",this.type,this.index)},openFile:function(){this.$emit("openFile",this.type,this.index)}}},de=ce,pe=(i("7e27"),Object(I["a"])(de,le,oe,!1,null,null,null)),ue=pe.exports,he={name:"Manage",components:{MyProgress:H,FileItem:ue},props:{breakpoint:Boolean},data:function(){return{dirs:[],fileList:[],dirList:[],mkdirName:"",mkdirVisible:!1,mkdirConfirmLoading:!1,mkdirTipsVisible:!1,mkdirOkDisable:!0,uploadFile:null,uploadVisible:!1,uploadConfirmLoading:!1,uploadBtnDisable:!1,delFileVisible:!1,delFileConfirmLoading:!1,spinning:!1,selectDir:[],selectFile:[],ddelFileVisible:!1,ddelFileConfirmLoading:!1,renameFileVisible:!1,renameFileConfirmLoading:!1,renameName:"",renameOkDisable:!0,renameTipsVisible:!1,removeFileVisible:!1,removeFileConfirmLoading:!1,hasRemoveSelect:!0,newPath:[],ddselectType:"",checkFileIndex:null,treeData:[],totalSpace:0,usedSpace:0}},computed:{hasPercent:function(){return!(this.dirs.length<=1)},getCheckFileName:function(){if(this.fileList.length>0||this.dirList.length>0){if("file"===this.ddselectType)return this.fileList[this.checkFileIndex].name;if("folder"===this.ddselectType)return this.dirList[this.checkFileIndex].name}return"没有文件被选中"},computeDiskInfo:function(){return this.usedSpace/this.totalSpace*100}},mounted:function(){var e=this;this.axios.post("/api/getUploadDirInfo").then((function(t){e.dirs=t.dirs,e.fileList=t.allFileInfo.files,e.dirList=t.allFileInfo.directories})),this.getDiskInfo()},methods:{deleteWarning:function(){},handleMkdirOk:function(){var e=this;this.mkdirConfirmLoading=!0;var t=this.$refs.dirInput.value;""===t?this.mkdirTipsVisible=!0:(this.mkdirTipsVisible=!1,this.axios.post("/api/mkdir",{path:this.dirs,dirname:t}).then((function(t){"suss"===t.data&&(e.mkdirVisible=!1),e.mkdirConfirmLoading=!1,e.mkdirName="",e.renewDirInfo()})))},checkDirName:function(e){/[\\/:*?"<>|]/.test(this.mkdirName)||""===this.mkdirName?(this.mkdirTipsVisible=!0,this.mkdirOkDisable=!0):(this.mkdirTipsVisible=!1,this.mkdirOkDisable=!1)},backPercent:function(e){var t=this;this.dirs.pop(),this.spinning=!0,this.axios.post("/api/getDirAllInfo",{path:this.dirs}).then((function(e){t.fileList=e.files,t.dirList=e.directories,t.spinning=!1,t.spinning=!1,t.selectDir=[],t.selectFile=[],t.ddselectType="",t.checkFileIndex=null})),this.getDiskInfo()},viewDir:function(e){var t=this;this.dirs.push(e.name),this.spinning=!0,this.axios.post("/api/getDirAllInfo",{path:this.dirs}).then((function(e){t.fileList=e.files,t.dirList=e.directories,t.spinning=!1,t.selectDir=[],t.selectFile=[],t.ddselectType="",t.checkFileIndex=null})),this.getDiskInfo()},renewDirInfo:function(){var e=this;this.spinning=!0,this.axios.post("/api/getDirAllInfo",{path:this.dirs}).then((function(t){e.fileList=t.files,e.dirList=t.directories,e.spinning=!1,e.ddselectType="",e.checkFileIndex=null})),this.getDiskInfo()},chooseFileItem:function(e,t,i){if("file"===e){var s=this.selectFile.length;if(i){for(var a=0;a<s;a++)if(this.selectFile[a]===t)return;this.selectFile.push(t)}else for(var n=0;n<this.selectFile.length;n++)this.selectFile[n]===t&&(this.selectFile.splice(n,1),n--)}if("folder"===e){var l=this.selectDir.length;if(i){for(var o=0;o<l;o++)if(this.selectDir[o]===t)return;this.selectDir.push(t)}else for(var r=0;r<this.selectDir.length;r++)this.selectDir[r]===t&&(this.selectDir.splice(r,1),r--)}},removeAllSelectFile:function(){var e=this;console.log("removeAllSelectFile");for(var t=[],i=this.selectDir.length,s=0;s<i;s++)t.push(this.dirList[this.selectDir[s]].name);i=this.selectFile.length;for(var a=0;a<i;a++)t.push(this.fileList[this.selectFile[a]].name);this.delFileConfirmLoading=!0,this.axios.post("/api/delAllFile",{path:this.dirs,names:t}).then((function(t){e.delFileConfirmLoading=!1,e.delFileVisible=!1,e.selectDir=[],e.selectFile=[],e.renewDirInfo()}))},chooseUploadFile:function(){this.$refs.inputFile.dispatchEvent(new MouseEvent("click"))},inputFile:function(){var e=this.$refs.inputFile.files;e.length<1||(this.uploadFile=e[0])},uploadFileOk:function(){var e=this;this.uploadConfirmLoading=!0,this.uploadBtnDisable=!0;var t={headers:{"Content-Type":"multipart/form-data"}},i=new FormData;i.append("path",this.dirs),i.append("uploadFile",this.uploadFile,this.uploadFile.name),this.axios.post("/api/uploadToDir",i,t).then((function(t){e.uploadConfirmLoading=!1,e.uploadBtnDisable=!1,e.uploadVisible=!1,e.$refs.inputFile.value="",e.uploadFile=null,e.renewDirInfo()}))},cancelUpload:function(){this.$refs.inputFile.value="",this.uploadFile=null},isChecked:function(e,t){if("file"===e){for(var i=this.selectFile.length,s=0;s<i;s++)if(this.selectFile[s]===t)return!0}else if("folder"===e)for(var a=this.selectDir.length,n=0;n<a;n++)if(this.selectDir[n]===t)return!0;return!1},checkAll:function(){for(var e=this.dirList.length,t=0;t<e;t++)this.selectDir.push(t);e=this.fileList.length;for(var i=0;i<e;i++)this.selectFile.push(i)},showRemoveModal:function(e,t){this.ddselectType=e,this.checkFileIndex=t,this.treeData.push({title:this.dirs[0],key:"0"}),this.removeFileVisible=!0},removeFileOk:function(){var e=this;this.removeFileConfirmLoading=!0,console.log(this.getCheckFileName),this.axios.post("/api/removeTo",{oldPath:this.dirs,newPath:this.newPath,name:this.getCheckFileName}).then((function(t){e.removeFileConfirmLoading=!1,e.removeFileVisible=!1,e.treeData=[],e.hasRemoveSelect=!0,e.renewDirInfo()}))},cancelRemove:function(){this.treeData=[]},onLoadData:function(e){for(var t=this,i=e.eventKey.split("-"),s=[],a=this.treeData,n=0;n<i.length;n++)s.push(a[parseInt(i[n])].title),a=a[parseInt(i[n])].children;return this.axios.post("/api/getDirs",{path:s}).then((function(i){if("fail"!==i.data){for(var s=[],a=0;a<i.length;a++)s.push({title:i.data[a],key:e.eventKey+"-"+a});e.dataRef.children=s,t.treeData=Object(ne["a"])(t.treeData)}}))},selectToDir:function(e,t){for(var i=e[0].split("-"),s=[],a=this.treeData,n=0;n<i.length;n++)s.push(a[parseInt(i[n])].title),a=a[parseInt(i[n])].children;this.newPath=s,this.hasRemoveSelect=!1},showDelModal:function(e,t){this.ddelFileVisible=!0,this.ddselectType=e,this.checkFileIndex=t},delFileOK:function(){var e=this,t=[];"file"===this.ddselectType?t.push(this.fileList[this.checkFileIndex].name):"folder"===this.ddselectType&&t.push(this.dirList[this.checkFileIndex].name),this.ddelFileConfirmLoading=!0,this.axios.post("/api/delAllFile",{path:this.dirs,names:t}).then((function(t){e.ddelFileVisible=!1,e.ddelFileConfirmLoading=!1,e.selectDir=[],e.selectFile=[],e.renewDirInfo()}))},cancelDel:function(){},showRenameModal:function(e,t){this.renameFileVisible=!0,this.ddselectType=e,this.checkFileIndex=t},checkFileName:function(){/^\.|[\\/:*?"<>]|\.$/.test(this.renameName)?(this.renameOkDisable=!0,this.renameTipsVisible=!0):(this.renameTipsVisible=!1,this.renameOkDisable=!1)},renameFileOk:function(){var e=this;this.renameFileConfirmLoading=!0;var t="";"file"===this.ddselectType?t=this.fileList[this.checkFileIndex].name:"folder"===this.ddselectType&&(t=this.dirList[this.checkFileIndex].name),this.axios.post("/api/rename",{path:this.dirs,oldName:t,newName:this.renameName}).then((function(t){e.renameFileVisible=!1,e.renameFileConfirmLoading=!1,e.renameOkDisable=!1,e.renameName="",e.renameTipsVisible=!1,e.selectDir=[],e.selectFile=[],e.renewDirInfo()}))},cancelRename:function(){this.renameName=""},downloadFile:function(e,t){console.log(this.fileList),this.ddselectType=e,this.checkFileIndex=t;var i=this.dirs.join("/"),s=this.fileList[t].name,a=encodeURIComponent(i+"/"+s);window.open(j["baseUrl"]+"/api/download?path=".concat(a),"_blank")},openFile:function(e,t){this.ddselectType=e,this.checkFileIndex=t;var i=this.dirs.join("/"),s=this.fileList[t].name,a=encodeURIComponent(i+"/"+s);window.open(j["baseUrl"]+"/api/openFile?path=".concat(a),"_blank")},downloadSelectFile:function(){if(this.selectDir.length>0)this.$message.error("无法下载文件夹");else{var e=this.selectFile;console.log(e);for(var t=0;t<e.length;t++){var i=this.fileList[parseInt(e[t])].name;window.open(j["baseUrl"]+"/api/download?path=".concat(i),"_blank")}}},getDiskInfo:function(){var e=this;this.axios.post("/api/getDiskInfo").then((function(t){e.usedSpace=t.usedSpace,e.totalSpace=t.totalSpace}))}}},fe=he,me=(i("9611"),Object(I["a"])(fe,se,ae,!1,null,null,null)),ve=me.exports,ge=function(){var e=this,t=e._self._c;return t("a-layout-content",{staticClass:"about-content"},[t("img",{attrs:{src:i("cf05"),width:"200px",height:"200px"}}),t("p",{staticClass:"version"},[e._v("Version："+e._s(e.version))]),t("p",[e._v("本软件用于文件上传，远程文件管理、访问等功能")]),t("p",[e._v("由setTile lzjyzq2制作")]),t("p",[e._v("可以扫描下方二维码进群反馈交流")]),t("img",{attrs:{src:i("643e"),width:"200px",height:"274px"}}),t("div",[t("a-button",{staticStyle:{margin:"5px 0px"}},[t("a",{attrs:{href:"https://jq.qq.com/?_wv=1027&k=5UiaOFF",target:"_blank"}},[e._v("或点击此处加入")])])],1),t("p",[e._v("觉得好用的话，可以捐助~~~")]),t("img")])},be=[],ke={name:"About",data:function(){return{version:"-"}},mounted:function(){this.getVersionInfo()},methods:{getVersionInfo:function(){var e=this;this.axios.get("/api/getVersionInfo").then((function(t){"fail"!==t.data&&(e.version=t.version)}))}}},Fe=ke,ye=(i("03a4"),Object(I["a"])(Fe,ge,be,!1,null,null,null)),_e=ye.exports,xe=function(){var e=this,t=e._self._c;return t("a-layout-content",{staticClass:"help-content"},[t("a-divider",{attrs:{orientation:"left"}},[e._v("注意事项")]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("注意事项")]),t("div",{staticClass:"content"},[t("p",[e._v("●由于安全考虑，建议仅在局域网环境下运行。")]),t("p",[e._v("●当前设置仅支持清理缓存。")])])]),t("a-divider",{attrs:{orientation:"left"}},[e._v("文件上传")]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("上传路径")]),t("p",{staticClass:"content"},[e._v("●"+e._s(e.uploadPath))])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("上传文件类型")]),t("p",{staticClass:"content"},[e._v("●不支持文件夹、无扩展名、或不常见的扩展类型的文件。")])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("操作")]),t("div",{staticClass:"content"},[t("p",[e._v("●拖拽或点击上传区域选择文件，支持多选。")]),t("p",[e._v("\n        ●当上传文件大小超过剩余容量容量时，会显示通知。请自行移除部分上传文件，以免上传出错。\n      ")]),t("p",[e._v("●当开始上传后，会禁止移除上传文件。")])])]),t("a-divider",{attrs:{orientation:"left"}},[e._v("文件管理")]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("上传文件")]),t("div",{staticClass:"content"},[t("p",[e._v("●不支持文件夹、无扩展名、或不常见的扩展类型的文件。")]),t("p",[e._v("●仅支持单个文件上传。")]),t("p",[e._v("●上传目录为当前浏览文件夹。")])])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("下载文件")]),t("div",{staticClass:"content"},[t("p",[e._v("●当选中文件包括文件夹时，无法下载。")]),t("p",[e._v("●下载多个文件时，若浏览器提示是否允许下载多个文件，请点击允许。")])])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("删除文件")]),t("div",{staticClass:"content"},[t("p",[e._v("●删除选中的文件夹和文件。")])])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("新建文件夹")]),t("div",{staticClass:"content"},[t("p",[e._v('●不允许新文件夹名称包含.\\/:*?"<>|')])])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("重命名文件")]),t("div",{staticClass:"content"},[t("p",[e._v('●不允许新文件夹名称包含\\/:*?"<>|')]),t("p",[e._v("●(.)不允许在开头和结尾。")])])]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("打开文件")]),t("div",{staticClass:"content"},[t("p",[e._v("\n        ●能被浏览器浏览的文件，能被正常打开浏览。（图片、txt文本文件、常见格式视频等）\n      ")])])]),t("a-divider",{attrs:{orientation:"left"}},[e._v("设置")]),t("div",{staticClass:"helpItem"},[t("p",{staticClass:"title"},[e._v("清理临时文件与缓存")]),t("div",{staticClass:"content"},[t("p",[e._v("●清理软件运行时产生的临时文件与缓存。")])])])],1)},Ce=[],De={name:"Help",data:function(){return{uploadPath:"-"}},mounted:function(){this.getDefaultUploadPath()},methods:{getDefaultUploadPath:function(){var e=this;this.axios.get("/api/getDefaultPploadPath").then((function(t){"fail"!==t.data&&(e.uploadPath=t.data)}))}}},Ie=De,Le=(i("2669"),Object(I["a"])(Ie,xe,Ce,!1,null,null,null)),we=Le.exports,Pe=function(){var e=this,t=e._self._c;return t("a-layout-content",{staticClass:"settings-content"},[t("div",{staticClass:"settingPanel"},[t("a-divider",{attrs:{orientation:"left"}},[e._v("存储")]),t("div",{staticClass:"settingItem"},[t("p",{staticClass:"title"},[e._v("缓存")]),t("a-button",{attrs:{icon:"delete"},on:{click:e.clearTempData}},[e._v("清理缓存")])],1)],1)])},Se=[],Te={name:"Settings",data:function(){return{}},methods:{clearTempData:function(){var e=this;this.axios.post("/api/cleartempdata").then((function(t){"suss"===t.data&&e.$message.info("清理缓存成功")}))}}},Ve=Te,Oe=(i("db4c"),Object(I["a"])(Ve,Pe,Se,!1,null,"2c0bd404",null)),Ne=Oe.exports;k["a"].use(z["a"]);var je=new z["a"]({mode:"history",routes:[{path:"/",redirect:{name:"uploadPanel"}},{path:"/uploadPanel",name:"uploadPanel",component:ie,meta:{title:"文件上传"}},{path:"/manage",name:"manage",component:ve,meta:{title:"文件管理"}},{path:"/settings",name:"settings",component:Ne,meta:{title:"设置"}},{path:"/about",name:"about",component:_e,meta:{title:"关于"}},{path:"/help",name:"help",component:we,meta:{title:"使用帮助"}}]});k["a"].use(b["a"]),k["a"].use(g["a"]),k["a"].use(v["a"]),k["a"].use(m["a"]),k["a"].use(f["b"]),k["a"].use(h["a"]),k["a"].use(u["a"]),k["a"].use(p["a"]),k["a"].use(d["a"]),k["a"].use(c["a"]),k["a"].use(r["a"]),k["a"].use(o["a"]),k["a"].use(l["a"]),k["a"].use(n["a"]),k["a"].use(a["a"]),k["a"].prototype.axios=$,k["a"].prototype.$message=s["a"],k["a"].config.productionTip=!1,new k["a"]({router:je,render:function(e){return e(V)}}).$mount("#app"),je.beforeEach((function(e,t,i){e.meta.title&&(document.title=e.meta.title),i()}))},"643e":function(e,t,i){e.exports=i.p+"static/img/joinQR.b99c3cd6.jpg"},"71fc":function(e,t,i){},7457:function(e,t,i){"use strict";i("906e")},"760f":function(e,t,i){},"7cc6":function(e,t,i){},"7e27":function(e,t,i){"use strict";i("f651")},"7f3b":function(e,t,i){"use strict";i("0b87")},"906e":function(e,t,i){},9611:function(e,t,i){"use strict";i("aafb")},aa45:function(e,t,i){"use strict";i("d592")},aafb:function(e,t,i){},cf05:function(e,t,i){e.exports=i.p+"static/img/logo.c133518d.png"},d592:function(e,t,i){},db4c:function(e,t,i){"use strict";i("7cc6")},f121:function(e,t,i){var s=i("f1e0");e.exports=s},f1e0:function(e,t){var i="http://127.0.0.1:17100";e.exports={title:"在线文件管理",baseUrl:i}},f651:function(e,t,i){}});
//# sourceMappingURL=app.863f04df.js.map